FROM node:18-bullseye

WORKDIR /usr/src/app

# Copiar arquivos de dependências
COPY package*.json ./

# Instalar TODAS as dependências (incluindo devDependencies para nodemon, jest, etc)
RUN npm ci

# Copiar código da aplicação
COPY . .

EXPOSE 3000

# Usar dev para desenvolvimento com hot-reload
CMD ["npm", "run", "dev"]
